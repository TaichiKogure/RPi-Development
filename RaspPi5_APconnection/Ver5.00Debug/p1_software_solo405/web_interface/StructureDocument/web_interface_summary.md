# web_interface 構造概要

## 概要

このドキュメントは、`G:\RPi-Development\RaspPi5_APconnection\Ver4.65Debug\p1_software_solo405\web_interface` ディレクトリの構造と機能を簡潔にまとめたものです。このウェブインターフェースは、Raspberry Pi 5（P1）とセンサーノード（P2、P3）から収集された環境データを視覚化するためのシステムです。

## 主要コンポーネント

### 1. コア機能

- **設定管理** (`config.py`): システム全体の設定を管理
- **メインアプリケーション** (`main.py`): Flaskアプリケーションの初期化と実行
- **旧バージョン** (`P1_app_solo.py`): モノリシック構造の旧バージョン
- **新バージョン** (`P1_app_solo_new.py`): リファクタリング済みの新バージョン

### 2. モジュール構成

- **API** (`api/`): APIエンドポイントの定義
- **データ管理** (`data/`): データの取得と処理
- **可視化** (`visualization/`): グラフとビジュアライゼーションの生成
- **ユーティリティ** (`utils/`): ヘルパー関数の提供
- **フロントエンド** (`templates/`, `static/`): UI定義とクライアントサイド機能

## アーキテクチャ

このシステムは、モノリシックな構造からモジュール化された構造へとリファクタリングされています。現在のアーキテクチャは以下の特徴を持ちます：

1. **モジュール分割**: 機能ごとに独立したモジュールに分割
2. **MVC パターン**: Model（データ）、View（UI）、Controller（ロジック）の分離
3. **依存性注入**: コンポーネント間の依存関係を明示的に注入
4. **RESTful API**: データアクセスのためのAPIエンドポイント提供

## 主要機能

1. **環境データの可視化**:
   - リアルタイムデータ表示
   - 履歴データのグラフ表示
   - ダッシュボード機能

2. **データ管理**:
   - CSV形式でのデータエクスポート
   - 日付範囲指定によるデータ抽出

3. **接続状態モニタリング**:
   - P2およびP3との接続状態表示
   - 信号強度、ノイズレベル等の表示

## 依存関係の概要

```
WebInterface (main.py)
  ├── 設定 (config.py)
  ├── データ管理 (data/data_manager.py)
  ├── 可視化 (visualization/graph_generator.py)
  └── API (api/routes.py)
```

## 技術スタック

- **バックエンド**: Python, Flask
- **データ処理**: Pandas
- **可視化**: Plotly
- **フロントエンド**: HTML, CSS, JavaScript

## まとめ

このウェブインターフェースは、モジュール化されたアーキテクチャを採用することで、保守性と拡張性を向上させています。環境データの可視化、データ管理、接続状態モニタリングなどの機能を提供し、Raspberry Pi 5を中心としたセンサーネットワークの監視と分析を可能にしています。