# LibDegradationSim03_test.py 解説ガイド

## 概要
LibDegradationSim03_test.py は、リチウムイオン電池のシミュレーションにおける各パラメータの影響を視覚的に理解するためのテストツールです。異なるパラメータ値を比較しながら、電池の劣化特性や充放電曲線がどのように変化するかを確認できます。

## 主な機能

### 1. パラメータ影響テスト
- 容量劣化パラメータ (A, B) のテスト
- 抵抗増加パラメータ (C, D) のテスト
- 充放電曲線パラメータ (C-レート, 内部抵抗) のテスト

### 2. 視覚的比較
- 複数のパラメータ値を同時にプロットして比較
- 明確なラベルと凡例で違いを識別
- グリッド表示で値の読み取りを容易に

### 3. 対話型インターフェース
- メニュー方式で実行したいテストを選択
- 各テストの基本パラメータをカスタマイズ可能
- 入力値の検証機能により、無効な値や範囲外の値を防止

### 4. CSV出力機能
- テスト結果をCSVファイルに保存するオプション
- タイムスタンプ付きのファイル名で上書きを防止
- 複数のパラメータ値の結果を一つのファイルにまとめて保存

## 使用方法

1. プログラムを実行すると、テストメニューが表示されます：
   ```
   python LibDegradationSim03_test.py
   ```

2. 以下のテストオプションから選択します：
   - 1: 容量劣化パラメータ (A, B) のテスト
   - 2: 抵抗増加パラメータ (C, D) のテスト
   - 3: 充放電曲線パラメータ (C-レート, 内部抵抗) のテスト
   - 0: 終了

3. 選択したテストに応じて、基本パラメータを入力します。

4. テストが実行され、結果がグラフとして表示されます。

5. テスト終了後、結果をCSVファイルに保存するかどうかを選択できます。

## テスト詳細

### 1. 容量劣化パラメータのテスト

このテストでは、容量劣化モデルのパラメータ A（最大劣化率）と B（劣化速度係数）がサイクル数に対する容量低下にどのように影響するかを視覚化します。

- **Aパラメータのテスト**：
  - 複数のA値（例：0.05, 0.1, 0.2, 0.3, 0.5）を使用
  - サイクル数に対する容量の変化をプロット
  - A値が大きいほど、最終的な容量低下が大きくなる

- **Bパラメータのテスト**：
  - 複数のB値（例：0.01, 0.05, 0.1, 0.2, 0.5）を使用
  - サイクル数に対する容量の変化をプロット
  - B値が大きいほど、初期サイクルでの容量低下が急速になる

### 2. 抵抗増加パラメータのテスト

このテストでは、抵抗増加モデルのパラメータ C（抵抗増加係数）と D（抵抗増加の指数）がサイクル数に対する内部抵抗の増加にどのように影響するかを視覚化します。

- **Cパラメータのテスト**：
  - 複数のC値（例：0.01, 0.05, 0.1, 0.2, 0.5）を使用
  - サイクル数に対する内部抵抗の変化をプロット
  - C値が大きいほど、抵抗増加の割合が大きくなる

- **Dパラメータのテスト**：
  - 複数のD値（例：0.5, 0.75, 1.0, 1.25, 1.5）を使用
  - サイクル数に対する内部抵抗の変化をプロット
  - D値が1より大きいと加速的に抵抗が増加し、1より小さいと減速的に増加する

### 3. 充放電曲線パラメータのテスト

このテストでは、C-レートと内部抵抗が充電曲線と放電曲線の形状にどのように影響するかを視覚化します。

- **C-レートのテスト**：
  - 複数のC-レート値（例：0.2, 0.5, 1.0, 2.0, 5.0）を使用
  - 容量に対する電圧の変化をプロット
  - C-レートが高いほど、同じ容量での電圧降下が大きくなり、利用可能な容量が減少する

- **内部抵抗のテスト**：
  - 複数の内部抵抗値（例：0.01, 0.05, 0.1, 0.2, 0.5）を使用
  - 容量に対する電圧の変化をプロット
  - 内部抵抗が大きいほど、電圧降下が大きくなり、利用可能な容量が減少する

## CSV出力ファイル

プログラムは選択したテストに応じて以下のCSVファイルを生成します：

1. **容量劣化パラメータのテスト**
   - `capacity_A_test_{timestamp}.csv`: A値の影響
   - `capacity_B_test_{timestamp}.csv`: B値の影響

2. **抵抗増加パラメータのテスト**
   - `resistance_C_test_{timestamp}.csv`: C値の影響
   - `resistance_D_test_{timestamp}.csv`: D値の影響

3. **充放電曲線パラメータのテスト**
   - `charge_crate_test_{timestamp}.csv`: 充電時のC-レートの影響
   - `discharge_crate_test_{timestamp}.csv`: 放電時のC-レートの影響
   - `charge_resistance_test_{timestamp}.csv`: 充電時の内部抵抗の影響
   - `discharge_resistance_test_{timestamp}.csv`: 放電時の内部抵抗の影響

## 応用例
- 電池設計における最適なパラメータの選定
- 劣化メカニズムの理解と分析
- 異なる使用条件（C-レート、温度など）の影響評価
- 劣化モデルのパラメータ感度分析