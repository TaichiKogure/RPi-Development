# P2 Software Solo Version 3.2

## 概要
このパッケージはRaspberry Pi Pico 2W用の環境センサーソフトウェアです。BME680センサーを使用して温度、湿度、気圧、ガス抵抗値を測定し、WiFi経由でRaspberry Pi 5（P1）に送信します。

## バージョン3.2の主な変更点

### 1. 送信リトライ機能の強化
- データ送信失敗時に最大5回まで自動再送を行うように改良
- 再送間隔を徐々に長くする（プログレッシブバックオフ）機能を追加
- 送信状態のログ出力を詳細化

### 2. エラー時ログ保存機能の強化
- デバイスリセット前にログを確実に保存するメカニズムを追加
- ファイルシステムの同期機能を追加し、フラッシュメモリへの書き込みを確実に
- リセット前の待機時間を調整し、ログ保存の完了を確保

### 3. その他の改善
- エラー表示のLED点滅パターンを明確化
- 起動時の安定性向上のためのディレイ調整
- エラーメッセージの詳細化

## ファイル構成
- `main_solo.py` - メインプログラム
- `data_transmission/P2_wifi_client_solo.py` - WiFi接続とデータ送信機能
- `error_handling/P2_watchdog_solo.py` - エラー処理と監視機能
- `sensor_drivers/bme680.py` - BME680センサードライバ

## 使用方法
1. すべてのファイルをRaspberry Pi Pico 2Wにコピー
2. Pico 2Wをリセットすると自動的にプログラムが起動
3. BME680センサーが初期化され、WiFi接続が確立されると、定期的にデータが送信される

## LED表示
- WiFi接続中: 200ms間隔で点滅
- WiFi未接続: 1000ms間隔でゆっくり点滅
- データ送信時: 短い点灯（200ms）
- WiFiエラー: 2回連続点滅を繰り返す
- センサーエラー: 3回連続点滅を繰り返す
- 両方エラー: 4回連続点滅を繰り返す

## 注意事項
- WiFi接続情報（SSID、パスワード、サーバーIP）は`main_solo.py`内で設定
- エラーログは`/error_log_solo.txt`に保存される
- 送信間隔は`main_solo.py`内の`TRANSMISSION_INTERVAL`で調整可能（デフォルト30秒）